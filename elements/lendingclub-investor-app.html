<link rel="import" href="/bower_components/font-roboto/roboto.html">
<link rel="import" href="/bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="/bower_components/iron-selector/iron-selector.html">
<link rel="import" href="/bower_components/iron-icons/iron-icons.html">
<link rel="import" href="/bower_components/iron-page-url/iron-page-url.html">

<link rel="import" href="/bower_components/app-layout/app-drawer-layout/app-drawer-layout.html">
<link rel="import" href="/bower_components/app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="/bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="/bower_components/app-layout/app-toolbar/app-toolbar.html">

<link rel="import" href="/bower_components/paper-icon-button/paper-icon-button.html">

<link rel="import" href="/elements/loan-list.html">
<link rel="import" href="/elements/page-router.html">

<dom-module id="lendingclub-investor-app">
  <template>
    <style>
      :host {
        font-family: 'Roboto', 'Noto', sans-serif;
        --app-primary-color: #404040;
      }

      app-drawer-layout {
        --app-drawer-background-color: var(--app-primary-color);
      }
      
      app-header {
        background-color: #4285f4;
        color: #eee;
      }

      .nav-menu {
        background-color: var(--app-primary-color);
        color: #fff;
      }

      .nav-menu > a {
        display: block;
        padding: 12px 16px;
        font-size: 20px;
        font-weight: 500;
        text-decoration: none;
        color: white;
      }

      .nav-menu > a.iron-selected {
        background-color: #888;
      }
    </style>
    <iron-ajax auto url="/api/loans/" last-response="{{ loans }}"></iron-ajax>
    <iron-page-url path="{{path}}"></iron-page-url>
    
    <app-drawer-layout responsive-width="800px">
      <div drawer>
        <iron-selector class="nav-menu">
          <a name="home" href="/">Home</a>
          <a name="loans" href="/loans">Loans</a>
          <a name="selected-loans" href="/selected-loans">Selected Loans</a>
        </iron-selector>
      </div>

      <app-header-layout main>
        <app-header condenses waterfall>
          <app-toolbar>
            <paper-icon-button icon="menu" drawer-toggle></paper-icon-button>
            <div title>Lendingclub Investor</div>
          </app-toolbar>
        </app-header>

        <page-router path="{{path}}">
          <div path="/">
            <h1>Home</h1>
          </div>
          <div path="/loans">
            <loan-list loans="[[ loans ]]" selected-loans="{{ selectedLoans }}">
            </loan-list>
          </div>
          <div path="/selected-loans">
            <loan-list loans="[[ selectedLoans ]]" selected-loans="{{ selectedLoans }}">
            </loan-list>
          </div>
        </page-router>
      </app-header-layout>
    </app-drawer-layout>
  </template>
</dom-module>

<script>
  Polymer({
    is: 'lendingclub-investor-app',
    properties: {
      loans: {
        type: 'Object'
      },
      selectedLoans: {
        type: 'Object',
        value: []
      },
      path: {
        type: 'string'
      }
    }
  });
</script>
